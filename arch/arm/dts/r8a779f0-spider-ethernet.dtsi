// SPDX-License-Identifier: GPL-2.0
/*
 * Device Tree Source for the Spider Ethernet sub-board
 *
 * Copyright (C) 2021 Renesas Electronics Corp.
 */

&pfc {
	tsn0_pins: tsn0 {
		mux {
			groups = "tsn0_link", "tsn0_mdio";
			function = "tsn0";
			drive-strength = <18>;
			power-source = <1800>;
		};

		pins_mdio {
			groups = "tsn0_mdio";
			drive-strength = <18>;
			power-source = <1800>;
		};
	};

	tsn1_pins: tsn1 {
		mux {
			groups = "tsn1_link", "tsn1_mdio";
			function = "tsn1";
			drive-strength = <18>;
			power-source = <1800>;
		};

		pins_mdio {
			groups = "tsn1_mdio";
			drive-strength = <18>;
			power-source = <1800>;
		};
	};

	tsn2_pins: tsn2 {
		mux {
			groups = "tsn2_link", "tsn2_mdio";
			function = "tsn2";
			drive-strength = <18>;
			power-source = <1800>;
		};

		pins_mdio {
			groups = "tsn2_mdio";
			drive-strength = <18>;
			power-source = <1800>;
		};
	};
};

&i2c4 {
	eeprom@52 {
		compatible = "rohm,br24g01", "atmel,24c01";
		label = "ethernet-sub-board";
		reg = <0x52>;
		pagesize = <8>;
	};
};

&rswitch {
	pinctrl-0 = <&tsn0_pins>, <&tsn1_pins>, <&tsn2_pins>;
	pinctrl-names = "default";
	phy-mode = "sgmii";
	status = "okay";

	ethernet-ports {
		#address-cells = <1>;
		#size-cells = <0>;

		port@0 {
			reg = <0>;
			phy-handle = <&etha0>;

			mdio {
				#address-cells = <1>;
				#size-cells = <0>;

				etha0: ethernet-phy@1 {
					reg = <1>;
					compatible = "ethernet-phy-ieee802.3-c45";
				};
			};
		};
		port@1 {
			reg = <1>;
			phy-handle = <&etha1>;

			mdio {
				#address-cells = <1>;
				#size-cells = <0>;

				etha1: ethernet-phy@2 {
					reg = <2>;
					compatible = "ethernet-phy-ieee802.3-c45";
				};
			};
		};
		port@2 {
			reg = <2>;
			phy-handle = <&etha2>;

			mdio {
				#address-cells = <1>;
				#size-cells = <0>;

				etha2: ethernet-phy@3 {
					reg = <3>;
					compatible = "ethernet-phy-ieee802.3-c45";
				};
			};
		};
	};
};
